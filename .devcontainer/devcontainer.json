{
  "name": "OSRS Wiki Android Development",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "features": {
    "ghcr.io/devcontainers/features/java:1": {
      "version": "11"
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode.vscode-gradle",
        "redhat.java",
        "ms-vscode.vscode-json",
        "vscjava.vscode-java-pack"
      ]
    }
  },
  "forwardPorts": [5554, 5556, 5037, 60000, 60001, 60002],
  "initializeCommand": "mkdir -p .devcontainer/claude-config && cp -r ~/.claude .devcontainer/claude-config/ 2>/dev/null || true",
  "postCreateCommand": "bash .devcontainer/setup.sh && bash .devcontainer/setup-tailscale.sh && echo '\nðŸš€ Container ready! Run ./scripts/setup-mobile-access.sh to complete Tailscale authentication.'",
  "runArgs": [
    "--cap-add=NET_ADMIN",
    "--device=/dev/net/tun"
  ],
  "mounts": [
    "source=${localWorkspaceFolder},target=/workspace,type=bind",
    "source=${localEnv:HOME}/.gradle,target=/home/vscode/.gradle,type=bind",
    "source=${localEnv:HOME}/.android,target=/home/vscode/.android,type=bind",
    "source=${localWorkspaceFolder}/.devcontainer/tailscale-state,target=/home/vscode/.tailscale,type=bind",
    "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind",
    "source=${localEnv:HOME}/.Xauthority,target=/home/vscode/.Xauthority,type=bind,consistency=cached"
  ],
  "remoteUser": "vscode",
  "workspaceFolder": "/workspace",
  "containerEnv": {
    "ANDROID_SDK_ROOT": "/opt/android-sdk",
    "ANDROID_HOME": "/opt/android-sdk",
    "IS_CONTAINER": "true",
    "DISPLAY": "${localEnv:DISPLAY:-:0}",
    "TS_STATE_DIR": "/home/vscode/.tailscale",
    "TS_AUTHKEY": "${localEnv:TS_AUTHKEY}"
  }
}